var mashapeKey="Fsz4qtOaKNmshsm6NqrJIFaLjD6jp1lWBaMjsn7wQaIvTisGiS",ingredientsList=[],currentItem;$(document).ready(function(){var a=function(){$(".grid-item a").on("click",function(a){a.preventDefault();var b=$(this).data("id");console.log(b),$.ajax({url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/"+b+"/information",type:"GET",data:{},dataType:"json",success:function(a){console.log(a),$(".popup-modal").magnificPopup("open"),$(".white-popup-block h1").text(a.title)},error:function(a){alert(a)},beforeSend:function(a){a.setRequestHeader("X-Mashape-Authorization",mashapeKey)}})})},b=function(b){var c=$("#dishes");b.forEach(function(a){var b=$("<div/>").addClass("grid-item"),d=(a.title.replace(" ","-"),$("<a/>").attr("data-id",a.id));$("<p/>").addClass("text-overlay").text(a.title).appendTo(d),$("<img/>").attr("src","https://webknox.com/recipeImages/"+a.image).appendTo(d);d.appendTo(b),b.appendTo(c)}),a();var d=$("#dishes").masonry({});d.imagesLoaded().progress(function(){d.masonry("layout")})},c=function(){$(".myIngredients li").removeClass("last");var a=$(".myIngredients li").length%2;a>0&&$(".myIngredients li:last-child").addClass("last")},d=function(){var a=$(".myIngredients"),b=$("<li/>").text(currentItem),d=$("<a/>").addClass("remove").appendTo(b);d.bind("click",function(a){var b=$(this).parent().text();console.log(b);var d=ingredientsList.indexOf(b);d>-1&&ingredientsList.splice(d,1),console.log(ingredientsList),$(this).unbind("click"),$(this).parent().remove(),c()}),b.appendTo(a),c()},e=function(){$.ajaxSetup({headers:{"X-Mashape-Key":"Fsz4qtOaKNmshsm6NqrJIFaLjD6jp1lWBaMjsn7wQaIvTisGiS"}}),$("#scotch-panel").scotchPanel({containerSelector:"body",direction:"right",duration:300,transition:"ease",clickSelector:".toggle-panel",distanceX:"300px",enableEscapeKey:!0}),$(".popup-modal").magnificPopup({type:"inline",preloader:!1,modal:!0}),$(document).on("click",".popup-modal-dismiss",function(a){a.preventDefault(),$.magnificPopup.close()}),$.ajax({url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/search?number=25",type:"GET",data:{},dataType:"json",success:function(a){var c={};console.log(a.results),c=a.results,b(c)},error:function(a){alert(a)},beforeSend:function(a){a.setRequestHeader("X-Mashape-Authorization",mashapeKey)}}),$("#ingredients").autocomplete({valueKey:"name",limit:12,visibleLimit:6,source:[{url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/food/ingredients/autocomplete?metaInformation=false&number=10&query=%QUERY%",type:"remote"}],getTitle:function(a){return a.name},getValue:function(a){return a.name}}).on("selected.xdsoft",function(a,b){currentItem=$("#ingredients").val(),ingredientsList.includes(currentItem)||(ingredientsList.push(currentItem),$("#mainIngredients h3").hide(),$("#mainIngredients label").text("Add ingredient"),d())})};e()});