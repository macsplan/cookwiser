var mashapeKey="Fsz4qtOaKNmshsm6NqrJIFaLjD6jp1lWBaMjsn7wQaIvTisGiS",ingredientsList=[],currentItem;$(document).ready(function(){var a=function(a,b){$(".popup-modal").magnificPopup("open"),$.ajax({url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/"+a+"/information",type:"GET",data:{},dataType:"json",success:function(a){$(".white-popup-block h1").text(a.title),$(".white-popup-block img").attr("src",a.image),$(".white-popup-block .ingredients").empty();var b=a.extendedIngredients;b.forEach(function(a){$("<p/>").text(a.name).appendTo($(".white-popup-block .ingredients"))})},error:function(a){alert(a)}}),$.ajax({url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/"+a+"/analyzedInstructions?stepBreakdown=true",type:"GET",data:{},dataType:"json",success:function(a){var b=a[0].steps;$(".white-popup-block .method").empty(),b.forEach(function(a){$("<p/>").text(a.step).appendTo($(".white-popup-block .method"))})},error:function(a){alert(a)}})},b=function(b,c){var d=$("<div/>").attr("id","dishes").addClass("grid");$("<div/>").addClass("grid-sizer").appendTo(d);b.forEach(function(b){var c=$("<div/>").addClass("grid-item"),e=(b.title.replace(" ","-"),$("<a/>").attr("data-id",b.id).on("click",function(b){b.preventDefault(),a($(this).data("id"),this)})),f=($("<p/>").addClass("text-overlay").text(b.title).appendTo(e),"");f=b.image.indexOf("https")>-1?b.image:"https://webknox.com/recipeImages/"+b.image;$("<img/>").attr("src",f).appendTo(e);e.appendTo(c),c.appendTo(d)}),d.appendTo(c)},c=function(a){var c=$("#results");c.empty(),b(a,c);var d=$("#dishes").masonry();d.imagesLoaded().progress(function(){d.masonry("layout")})},d=function(){$(".myIngredients li").removeClass("last");var a=$(".myIngredients li").length%2;a>0&&$(".myIngredients li:last-child").addClass("last")},e=function(){var a=ingredientsList.join(","),b=escape(a);$.ajax({url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/findByIngredients?fillIngredients=false&ingredients="+b+"&limitLicense=false&number=25&ranking=1",type:"GET",data:{},dataType:"json",success:function(a){var b={};b=a,c(b)},error:function(a){alert(a)}})},f=function(){var a=$(".myIngredients"),b=$("<li/>").text(currentItem),c=$("<a/>").addClass("remove").appendTo(b);c.bind("click",function(a){var b=$(this).parent().text(),c=ingredientsList.indexOf(b);c>-1&&ingredientsList.splice(c,1),$(this).unbind("click"),$(this).parent().remove(),d(),e()}),b.appendTo(a),d(),e()},g=function(){$.ajaxSetup({headers:{"X-Mashape-Key":"Fsz4qtOaKNmshsm6NqrJIFaLjD6jp1lWBaMjsn7wQaIvTisGiS"}}),$("#scotch-panel").scotchPanel({containerSelector:"body",direction:"right",duration:300,transition:"ease",clickSelector:".toggle-panel",distanceX:"300px",enableEscapeKey:!0}),$(".popup-modal").magnificPopup({type:"inline",preloader:!1,modal:!0}),$(document).on("click",".popup-modal-dismiss",function(a){a.preventDefault(),$.magnificPopup.close()}),$.ajax({url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/recipes/search?number=25",type:"GET",data:{},dataType:"json",success:function(a){var b={};b=a.results,c(b)},error:function(a){alert(a)}}),$("#ingredients").autocomplete({valueKey:"name",limit:12,visibleLimit:6,source:[{url:"https://spoonacular-recipe-food-nutrition-v1.p.mashape.com/food/ingredients/autocomplete?metaInformation=false&number=10&query=%QUERY%",type:"remote"}],getTitle:function(a){return a.name},getValue:function(a){return a.name}}).on("selected.xdsoft",function(a,b){currentItem=$("#ingredients").val(),ingredientsList.includes(currentItem)||(ingredientsList.push(currentItem),$("#mainIngredients h3").hide(),$("#mainIngredients label").text("Add ingredient"),f())})};g()});